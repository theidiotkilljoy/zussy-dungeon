<!doctype html>
<html lang="en">
<head>
  <link rel="preload" as="audio" href="assets/audio/start.mp3" type="audio/mpeg">

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Welcome, Lord Zussy</title>
<style>
  :root{
    --bg:#0a0b10; --text:#e8ecf1; --ink:#2a2418;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0}
  body{
    /* same background as envelope view */
    background:
      radial-gradient(1200px 800px at 50% 0%, #121622 0%, #0a0b10 70%),
      repeating-linear-gradient(0deg, rgba(255,255,255,.02) 0 2px, transparent 2px 4px);
    color:var(--text); font:16px/1.45 system-ui,-apple-system,"Segoe UI",Roboto,Arial;
  }

  header{display:grid;place-items:center;padding:12px 0}
  h1{margin:0;font-weight:900;letter-spacing:.2px;font-size:clamp(26px,4.6vw,40px)}

  .stage{display:grid;place-items:center;padding:10px 16px}
  .envelope{position:relative;width:min(88vw,760px);aspect-ratio:16/9}

  /* SVG flap anim (no shadows anywhere) */
  #flap{transition:transform .9s cubic-bezier(.2,.7,.2,1);transform-origin:50% 0%;transform-box:fill-box}
  .open #flap{transform:rotateX(-150deg)} /* gentle to avoid clipping */

  /* Centered PNG wax seal */
  .seal-btn{
    --s: clamp(70px,10vw,130px);
    position:absolute;left:50%;top:54%;
    transform:translate(-50%,-50%);
    width:var(--s);height:var(--s);padding:0;border:0;background:transparent;
    display:grid;place-items:center;cursor:pointer;user-select:none;
    transition:transform .16s ease, opacity .25s ease;
  }
  .seal-btn:hover{transform:translate(-50%,-51%) scale(1.02)}
  .seal-btn:active{transform:translate(-50%,-49%) scale(.985)}
  .open .seal-btn{opacity:0;pointer-events:none}
  .seal-img{width:100%;height:100%;object-fit:contain;display:block}

  /* Full-page letter overlay (transparent bg to keep site background) */
  .letter-overlay{
    position:fixed;inset:0;z-index:20;
    background:transparent;
    display:grid;place-items:center;
    padding:clamp(8px,2vw,20px);
    opacity:0;transform:translateY(6%);pointer-events:none;
    transition:opacity .45s ease, transform .45s ease;
  }
  .letter-overlay.show{opacity:1;transform:translateY(0);pointer-events:auto}

  /* Parchment page */
  .paper{
    /* portrait page; adjust max width to taste */
    width:min(92vw, 820px);
    aspect-ratio: 3 / 4;                 /* close to your imageâ€™s ratio */
    background: url("assets/img/paper.png") center / contain no-repeat;
    position:relative;
  }
  /* Generous inner margins so text stays well off the edges/burns */
  .paper-safe{
    position:absolute;
    inset: clamp(20px, 6vw, 64px);        /* top/right/bottom/left margin */
    color:var(--ink);
    display:grid; place-items:center;
    overflow:auto;                        /* scroll if content is long */
  }
  .paper-content{ width:min(100%, 70ch); text-align:center; }
  .paper-content h2{margin:.2em 0 .6em;font:800 clamp(22px,4vw,36px)/1.2 "Georgia",serif}
  .paper-content p{margin:.55em 0;font:500 17px/1.6 "Georgia",serif}
  .cta{margin-top:14px}
  .btn{
    display:inline-block;background:#0f1320;border:1px solid #2a334a;color:#e8ecf1;
    padding:12px 18px;border-radius:12px;text-decoration:none;font-weight:800;
    text-transform:uppercase;letter-spacing:.08em;
  }
</style>
</head>
<body>
  <header><h1>Welcome, Lord Zussy</h1></header>

  <div class="stage">
    <div id="envBox" class="envelope" aria-live="polite">
      <!-- Single SVG envelope (no shadows). Flap opens. -->
      <svg viewBox="0 0 900 520" width="100%" height="100%" style="overflow:visible" aria-label="A parchment envelope">
        <defs>
          <linearGradient id="baseGrad" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="#f7edd2"/><stop offset="60%" stop-color="#eadcb8"/><stop offset="100%" stop-color="#d7c69c"/>
          </linearGradient>
          <linearGradient id="lowerGrad" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="#e6d6b2"/><stop offset="100%" stop-color="#d1bf93"/>
          </linearGradient>
          <linearGradient id="flapGrad" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="#f6ecd1"/><stop offset="58%" stop-color="#ecdfbe"/><stop offset="100%" stop-color="#d9c79e"/>
          </linearGradient>
        </defs>

        <!-- Base rounded rectangle -->
        <rect x="10" y="10" rx="22" ry="22" width="880" height="500" fill="url(#baseGrad)" stroke="#b49c6e" />

        <!-- Bottom pocket triangle -->
        <path d="M 80 510 L 450 280 L 820 510 Z" fill="url(#lowerGrad)" />

        <!-- Top flap (rotates open) -->
        <g id="flap">
          <path d="M 60 20 L 840 20 L 450 280 Z" fill="url(#flapGrad)" />
        </g>
      </svg>

      <!-- Your PNG wax seal -->
      <button id="sealBtn" class="seal-btn" aria-label="Break the wax seal">
        <img class="seal-img" src="assets/img/seal.png" width="240" height="240" alt="">
      </button>
    </div>
  </div>

  <!-- Centered parchment page overlay (uses your paper.png) -->
  <section id="letterOverlay" class="letter-overlay" aria-hidden="true">
    <div class="paper" role="dialog" aria-label="Quest letter">
      <div class="paper-safe">
        <div class="paper-content">
          <h2>32<sup>nd</sup> Quest Ahead</h2>
          <p>Dear Lord Zussy,<br>
            <br>
          You have been tasked with clearing the dungeon ahead.<br>
          Be warned, this is no easy task; for a rather... foul beast... awaits you. But just as for all dangers in life, there are great rewards on the other side. And, of course, you will be compensated accordingly.<br>
          Good luck, adventurer.<br>
            <br>
          Sincerely,<br>
          Lady Mimi LeSimp<br>
          Ruler of the Royal Capital</p>
      
          <div class="cta"><a class="btn" href="dungeon.html">enter the dungeon</a></div>
        </div>
      </div>
    </div>
  </section>

<script>
  (function(){
    const env  = document.getElementById('envBox');
    const seal = document.getElementById('sealBtn');
    const overlay = document.getElementById('letterOverlay');

    function openLetter(){
      if(env.classList.contains('open')) return;
      env.classList.add('open');
      overlay.classList.add('show');
      overlay.setAttribute('aria-hidden','false');
      seal.setAttribute('tabindex','-1');
    }
    seal.addEventListener('click', openLetter);
    seal.addEventListener('keydown', e=>{
      if(e.key==='Enter' || e.key===' '){ e.preventDefault(); openLetter(); }
    });
  })();
  <audio id="bgm" src="assets/audio/start.mp3" loop preload="auto"></audio>

</script>
</body>
</html>
